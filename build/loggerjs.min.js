var LoggerJS=LoggerJS||function(){function a(a){return a.split(/\n\s+at\s+/)}function b(a){return a.join("\n    at ")}function c(b){var c,d=a(b.stack);return c=d.slice(b.isFromConsoleWrapper?3:1)}function d(a){if(!(this instanceof d))return new d;a=a?a:{};var b;if(!a.task)throw b=new Error,b.name="LogTaskInstanciationError",b.message="you have to provide a task for the LogTask instance: options = {task: function (logEntry) {/*your task code*/}}",b;if(!a.name)throw b=new Error,b.name="LogTaskInstanciationError",b.message='you have to provide a name for the LogTask instance: options = {name: "xyz"}',b;this.task=a.task,this.name=a.name,this.status="boolean"==typeof a.status?a.status:!0,this.strict="boolean"==typeof a.strict?a.strict:!1,this.log_level=m.exists(a.logLevel)?a.logLevel:m.ERROR}function e(a){if(!(a&&a instanceof s))throw new Error("triggerLogTaskProcessing awaits a LogEntry object as argument");var b=a.toJson();for(var c in t)t[c].strict&&b.logLevel!==t[c].log_level||m.checkPriority(b.logLevel,t[c].log_level)&&t[c].task(a)}function f(a){u&&k&&k(a)}function g(a){if(!(this instanceof g))return new g;if(a=a?a:{},!a.namespace){var b=new Error;throw b.name="LoggerInstanciationError",b.message='you have to provide a namespace for the Logger instance: options = {namespace: "x.y.z"}',b}a.tags&&(y=a.tags),x="boolean"==typeof a.uniqueLogKeys?a.uniqueLogKeys:!0,w=a.namespace,this.status="boolean"==typeof a.status?a.status:!0,this.log_level=m.exists(a.logLevel)?a.logLevel:m.ERROR,a.logServerUrl&&(A=m.exists(a.logServerLevel)?a.logServerLevel:this.log_level,B=a.logServerUrl,this.useLogServer(B,A))}function h(a){return z?(E=C())?(E.onreadystatechange=i,E.open("POST",B,!0),E.setRequestHeader("Content-Type","application/json; charset=utf-8"),void E.send(JSON.stringify(a.toJson()))):(console.error("LoggerJS::pushToLogServer - no HTTP Request coultd be instanciated"),!1):!1}function i(){if(4===this.readyState&&200!==this.status){var a;this.status?(a=new Error("LogServer returned HTTP StatusCode "+this.status+", url: "+B),a.name="LoggerJS::LogServerException"):(a=new Error("LogServer unreachable, url: "+B),a.name="LoggerJS::LogServerException"),entry=new s(a),console.error(entry.toString()),f(entry)}}function j(){var a=!1;G&&(H=window.document.getElementById(G)),parent||(H=window.document.body,a=!0),I=document.createElement("div"),I.id=J,a&&H.firstChild?H.insertBefore(I,H.firstChild):H.appendChild(I)}function k(a){I||j();var b=a.toString().replace(/\n/g,"<br/>&nbsp;&nbsp;&nbsp;&nbsp;"),c=document.createElement("div");c.id=a.namespace+"-"+a.hash,c.className="LJS"+a.logLevel,c.innerHTML=b,I.firstChild?I.insertBefore(c,I.firstChild):I.appendChild(c)}var l=l||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=l,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)e[j]=0|a[b+j];else{var k=e[j-3]^e[j-8]^e[j-14]^e[j-16];e[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+e[j],k=20>j?k+((f&g|~f&h)+1518500249):40>j?k+((f^g^h)+1859775393):60>j?k+((f&g|f&h|g&h)-1894007588):k+((f^g^h)-899497514),i=h,h=g,g=f<<30|f>>>2,f=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(b),a.HmacSHA1=d._createHmacHelper(b)}();var m={};m.AUTH="AUTH",m.LOG="LOG",m.INFO="INFO",m.FATAL="FATAL",m.ERROR="ERROR",m.WARNING="WARNING",m.PATH="PATH",m.DEBUG="DEBUG",m.priority={},m.log_priority=[m.FATAL,m.ERROR,m.WARNING,m.INFO,m.AUTH,m.LOG,m.PATH,m.DEBUG],m.withStack=[m.FATAL,m.ERROR];for(var n in m.log_priority)m.priority[m.log_priority[n]]=n;m.checkPriority=function(a,b){return m.priority[a]<=m.priority[b]},m.exists=function(a){return m.priority[a]?!0:!1};var o=function(a){var b=c(a),d=b[0];return d=(d.indexOf(" (")>=0?d.split(" (")[1].substring(0,d.length-1):d.split("at ")[1])||d,d=d.indexOf(")")>=0?d.split(")")[0]:d},p=null,q=function(a){var d,e,f=m.withStack.indexOf(a.name)>-1?!0:!1,g={};if(a instanceof Error){if(g.type="logentry",g.namespace=w,g.tags=y,g.timestamp=new Date,g.logLevel=a.name,g.uniqueKey=x,g.hash=x?l.SHA1(g.logMessage+g.timestamp.toISOString()).toString():l.SHA1(g.logMessage).toString(),a.message instanceof Error||m.withStack.indexOf(a.name)>-1){var h=c(a);h.unshift(a.message),g.logMessage=b(h)}else g.logMessage=a.message;g.logLocation=a.fileName?a.fileName:o(a),d=r(g.logLocation),e=d.split(":"),a.lineNumber?(g.fileName=e[0]?e[0]:"unknown",g.lineNumber=a.lineNumber):(g.fileName=e[0]?e[0]:"unknown",g.lineNumber=e[1]?e[1]:"unknown"),g.logLocation.indexOf(":"+g.lineNumber)<0&&(g.logLocation+=":"+g.lineNumber),f?g.stack=a.stack:g.logLocation=g.fileName+":"+g.lineNumber}return g},r=function(a){p||(p=a.lastIndexOf("/")>0?"/":"\\");var b=a.lastIndexOf(p)+1;return b>0?a.substring(b):a},s=s||function(){function a(b,c){if(!(this instanceof a))return new a;var d=q(b,c);D(d),this.toJson=function(){return d}}return a.prototype.toString=function(){var a=this.toJson(),b="";return b+=this.getConsolePrefix(),b+=" ",b+=a.logMessage},a.prototype.getConsolePrefix=function(){var a=this.toJson(),b="";return b+=a.timestamp.toISOString(),b+=" - ",b+=w,b+=" - ",b+=a.logLevel,b+=" - ",b+=a.logLocation,b+=" -"},a}(this);!function(){d.prototype.setLogLevel=function(a){m.exists(a)&&(this.log_level=a,this.status=!0)},d.prototype.disable=function(){this.status=!1},d.prototype.enable=function(){this.status=!0},d.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1}}();var t={},u=!1,v=function(b){var c=Error;c.prototype.write=function(b,c){this.isFromConsoleWrapper=!0,this.message=b.length>1?JSON.stringify(b):b[0];var d=c.toUpperCase(),g=m.withStack.indexOf(d)>-1?!0:!1;this.name=d;var h=new s(this);if(g&&!(b[0]instanceof Error)){var i=a(this.stack).slice(3);i.unshift(b[0]),b[0]=i.join("\n    at ")}for(var j in b)b[j]instanceof Error&&(b[j]=b[j].stack);var k=h.getConsolePrefix();if(b=[k].concat(b),console){var l=g?"error":c;console[l]?console[l].apply?console[l].apply(console,b):console[l](b):console.log.apply?console.log.apply(console,b):console.log(b)}else u=!0;f(h),e(h)};var d=function(a){var b=a.toUpperCase();return function(){this.status&&m.checkPriority(b,this.log_level)&&c().write(Array.prototype.slice.call(arguments,0),a)}},g=d("log");for(var h in b)g[b[h].toLowerCase()]=d(b[h].toLowerCase()),g[b[h].toLowerCase()].LEVEL=b[h];return g}(m.log_priority),w=null,x=!0,y=[];g.prototype=v,g.prototype.constructor=v;var z=!1,A=null,B=null;!function(){var a=null;for(a in m)g.prototype[a]=m[a];g.prototype.setLogLevel=function(a){m.exists(a)&&(this.log_level=a,this.status=!0)},g.prototype.disable=function(){this.status=!1},g.prototype.enable=function(){this.status=!0},g.prototype.toggleStatus=function(){this.status=!this.status},g.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1},g.prototype.getNamespace=function(){return w},g.prototype.getTags=function(){return y},g.prototype.be=function(a){return a=a?a:this.log_level,this.status&&m.checkPriority(a,this.log_level)?!0:!1},g.prototype.useLogServer=function(a,b){A=m.exists(b)?b:m.ERROR,z=!0,B=a;var c={name:"LogServer",status:z,logLevel:A,task:h};this.registerLogTask(new d(c))},g.prototype.setLogServerLevel=function(a){A=m.exists(a)?a:m.ERROR,this.setLogTaskLogLevel("LogServer",A)},g.prototype.enableLogServer=function(){this.enableLogTask("LogServer")},g.prototype.disableLogServer=function(){this.disableLogTask("LogServer")},g.prototype.registerLogTask=function(a){a instanceof d&&(t[a.name]=a)},g.prototype.getLogTasks=function(){return t},g.prototype.setLogTaskLogLevel=function(a,b){t[a]&&m.exists(b)&&t[a].setLogLevel(b)},g.prototype.enableLogTask=function(a){t[a]&&t[a].enable()},g.prototype.disableLogTask=function(a){t[a]&&t[a].disable()},g.prototype.setLogTaskStatus=function(a,b){t[a]&&t[a].setLogLevel(b)},g.prototype.unregisterLogTask=function(a){"string"==typeof a&&t[a]&&delete t[a],a instanceof d&&t[a.name]&&delete t[a.name]}}();var C,D=function(a){a.userLocation=window.location.href},E=!1;if(window.XMLHttpRequest)C=function(){var a=new XMLHttpRequest;return a.overrideMimeType&&a.overrideMimeType("application/json"),a};else if(window.ActiveXObject)try{new ActiveXObject("Msxml2.XMLHTTP"),C=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(F){try{new ActiveXObject("Microsoft.XMLHTTP"),C=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(F){}}!function(){function a(a,b,c,d,g){var i=null;return g?(!g.fileName&&b&&(g.fileName=b),!g.lineNumber&&c&&(g.lineNumber=c)):(g=new Error,g.message=a,g.fileName=b,g.lineNumber=c),g.name="ERROR",i=new s(g),console.error(i.toString()),h(i),f(i),e(i),!0}window&&(window.onerror=window.onerror||a)}(this);var G,H,I,J="LJSWebConsole";g.prototype.useWebConsole=function(a,b){G=a||G,J=b||J,u=!0},g.prototype.enableWebConsole=function(){u=!0},g.prototype.disableWebConsole=function(){u=!1,H.innerHTML=""},g.prototype.cleanWebConsole=function(){I.innerHTML=""};var K={Logger:g,LogTask:d};for(property in m)"string"==typeof m[property]&&(K[property]=m[property]);return K}(this);