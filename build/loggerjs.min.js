var LoggerJS=LoggerJS||function(){function a(a){return(i=g())?(i.onreadystatechange=b,i.open("POST",z,!0),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),void i.send(JSON.stringify(a.toJson()))):(console.error("ERROR - pushToLogServer: no http_request coultd be instanciated"),!1)}function b(){4===this.readyState&&200!==this.status&&console.error("Error while pushing to LogServer",this)}function c(a){return a.split(/\n\s+at\s+/)}function d(a){if(!(this instanceof d))return new d;a=a?a:{};var b;if(!a.task)throw b=new Error,b.name="LogTaskInstanciationError",b.message="you have to provide a task for the LogTask instance: options = {task: function (logEntry) {/*your task code*/}}",b;if(!a.name)throw b=new Error,b.name="LogTaskInstanciationError",b.message='you have to provide a name for the LogTask instance: options = {name: "xyz"}',b;this.task=a.task,this.name=a.name,this.status="boolean"==typeof a.status?a.status:!0,this.strict="boolean"==typeof a.strict?a.strict:!1,this.log_level=l.exists(a.logLevel)?a.logLevel:l.ERROR}function e(a){if(!(a&&a instanceof r))throw new Error("triggerLogTaskProcessing awaits a LogEntry object as argument");var b=a.toJson();for(var c in s)s[c].strict&&b.logLevel!==s[c].log_level||l.checkPriority(b.logLevel,s[c].log_level)&&s[c].task(a)}function f(a){if(!(this instanceof f))return new f;if(a=a?a:{},!a.namespace){var b=new Error;throw b.name="LoggerInstanciationError",b.message='you have to provide a namespace for the Logger instance: options = {namespace: "x.y.z"}',b}a.tags&&(w=a.tags),v="boolean"==typeof a.uniqueLogKeys?a.uniqueLogKeys:!0,u=a.namespace,this.status="boolean"==typeof a.status?a.status:!0,this.log_level=l.exists(a.logLevel)?a.logLevel:l.ERROR,a.logServerUrl&&(y=l.exists(a.logServerLevel)?a.logServerLevel:this.log_level,z=a.logServerUrl,this.useLogServer(z,y))}var g,h=function(a){a.userLocation=window.location.href},i=!1;if(window.XMLHttpRequest)g=function(){var a=new XMLHttpRequest;return a.overrideMimeType&&a.overrideMimeType("application/json"),a};else if(window.ActiveXObject)try{new ActiveXObject("Msxml2.XMLHTTP"),g=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(j){try{new ActiveXObject("Microsoft.XMLHTTP"),g=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(j){}}!function(){function b(b,c,d,f,g){var h=null;return g?(!g.fileName&&c&&(g.fileName=c),!g.lineNumber&&d&&(g.lineNumber=d)):(g=new Error,g.message=b,g.fileName=c,g.lineNumber=d),g.name="ERROR",h=new r(g,!0),x&&a(h),console.error(h.toString()),e(h),!0}window&&(window.onerror=window.onerror||b)}(this);var k=k||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=k,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)e[j]=0|a[b+j];else{var k=e[j-3]^e[j-8]^e[j-14]^e[j-16];e[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+e[j],k=20>j?k+((f&g|~f&h)+1518500249):40>j?k+((f^g^h)+1859775393):60>j?k+((f&g|f&h|g&h)-1894007588):k+((f^g^h)-899497514),i=h,h=g,g=f<<30|f>>>2,f=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(b),a.HmacSHA1=d._createHmacHelper(b)}();var l={};l.AUTH="AUTH",l.LOG="LOG",l.INFO="INFO",l.FATAL="FATAL",l.ERROR="ERROR",l.WARNING="WARNING",l.PATH="PATH",l.DEBUG="DEBUG",l.priority={},l.log_priority=[l.FATAL,l.ERROR,l.WARNING,l.INFO,l.AUTH,l.LOG,l.PATH,l.DEBUG],l.withStack=[l.FATAL,l.ERROR];for(var m in l.log_priority)l.priority[l.log_priority[m]]=m;l.checkPriority=function(a,b){return l.priority[a]<=l.priority[b]},l.exists=function(a){return l.priority[a]?!0:!1};var n=function(a,b){var d,e=c(a);return d=b?e[3]:e[1],d=(d.indexOf(" (")>=0?d.split(" (")[1].substring(0,d.length-1):d.split("at ")[1])||d,d=d.indexOf(")")>=0?d.split(")")[0]:d},o=null,p=function(a,b){b="boolean"==typeof b?b:!0;var c,d,e={};return a instanceof Error&&(e.type="logentry",e.namespace=u,e.tags=w,e.timestamp=new Date,e.logLevel=a.name,e.uniqueKey=v,e.hash=v?k.SHA1(e.logMessage+e.timestamp.toISOString()).toString():k.SHA1(e.logMessage).toString(),e.logMessage=a instanceof Error?a.stack.replace(/^ERROR: /,""):a.message,b&&(e.stack=a.stack),e.logLocation=a.fileName?a.fileName:n(a.stack,a.isFromConsoleWrapper),c=q(e.logLocation),d=c.split(":"),a.lineNumber?(e.fileName=d[0]?d[0]:"unknown",e.lineNumber=a.lineNumber):(e.fileName=d[0]?d[0]:"unknown",e.lineNumber=d[1]?d[1]:"unknown"),e.logLocation.indexOf(":"+e.lineNumber)<0&&(e.logLocation+=":"+e.lineNumber)),e},q=function(a){o||(o=a.lastIndexOf("/")>0?"/":"\\");var b=a.lastIndexOf(o)+1;return b>0?a.substring(b):a},r=r||function(){function a(b,c){if(!(this instanceof a))return new a;var d=p(b,c);h(d),this.toJson=function(){return d}}return a.prototype.toString=function(){var a=this.toJson(),b="";return b+=this.getConsolePrefix(),b+=" ",b+=a.logMessage},a.prototype.getConsolePrefix=function(){var a=this.toJson(),b="";return b+=a.timestamp.toISOString(),b+=" - ",b+=u,b+=" - ",b+=a.logLevel,b+=" - ",b+=a.logLocation,b+=" -"},a}(this);!function(){d.prototype.setLogLevel=function(a){l.exists(a)&&(this.log_level=a,this.status=!0)},d.prototype.disable=function(){this.status=!1},d.prototype.enable=function(){this.status=!0},d.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1}}();var s={},t=function(a){var b=Error;b.prototype.write=function(a,b){this.isFromConsoleWrapper=!0,this.message=a.length>1?JSON.stringify(a):a[0];var d=b.toUpperCase(),f=l.withStack.indexOf(d)>-1?!0:!1;this.name=d;var g=new r(this,f);if(f&&!(a[0]instanceof Error)){var h=c(this.stack).slice(3);h.unshift(a[0]),a[0]=h.join("\n    at ")}for(var i in a)a[i]instanceof Error&&(a[i]=a[i].stack);var j=g.getConsolePrefix();if(a=[j].concat(a),console){var k=f?"error":b;console[k]?console[k].apply?console[k].apply(console,a):console[k](a):console.log.apply?console.log.apply(console,a):console.log(a)}e(g)};var d=function(a){var c=a.toUpperCase();return function(){this.status&&l.checkPriority(c,this.log_level)&&b().write(Array.prototype.slice.call(arguments,0),a)}},f=d("log");for(var g in a)f[a[g].toLowerCase()]=d(a[g].toLowerCase()),f[a[g].toLowerCase()].LEVEL=a[g];return f}(l.log_priority),u=null,v=!0,w=[];f.prototype=t,f.prototype.constructor=t;var x=!1,y=null,z=null;!function(){var b=null;for(b in l)f.prototype[b]=l[b];f.prototype.setLogLevel=function(a){l.exists(a)&&(this.log_level=a,this.status=!0)},f.prototype.disable=function(){this.status=!1},f.prototype.enable=function(){this.status=!0},f.prototype.toggleStatus=function(){this.status=!this.status},f.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1},f.prototype.getNamespace=function(){return u},f.prototype.getTags=function(){return w},f.prototype.be=function(a){return a=a?a:this.log_level,this.status&&l.checkPriority(a,this.log_level)?!0:!1},f.prototype.useLogServer=function(b,c){y=l.exists(c)?c:l.ERROR,x=!0,z=b;var e={name:"LogServer",status:x,logLevel:y,task:a};this.registerLogTask(new d(e))},f.prototype.setLogServerLevel=function(a){y=l.exists(a)?a:l.ERROR,this.setLogTaskLogLevel("LogServer",y)},f.prototype.enableLogServer=function(){this.enableLogTask("LogServer")},f.prototype.disableLogServer=function(){this.disableLogTask("LogServer")},f.prototype.registerLogTask=function(a){a instanceof d&&(s[a.name]=a)},f.prototype.getLogTasks=function(){return s},f.prototype.setLogTaskLogLevel=function(a,b){s[a]&&l.exists(b)&&s[a].setLogLevel(b)},f.prototype.enableLogTask=function(a){s[a]&&s[a].enable()},f.prototype.disableLogTask=function(a){s[a]&&s[a].disable()},f.prototype.setLogTaskStatus=function(a,b){s[a]&&s[a].setLogLevel(b)},f.prototype.unregisterLogTask=function(a){"string"==typeof a&&s[a]&&delete s[a],a instanceof d&&s[a.name]&&delete s[a.name]}}();var A={Logger:f,LogTask:d};for(property in l)"string"==typeof l[property]&&(A[property]=l[property]);return A}(this);