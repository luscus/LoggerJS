var LoggerJS=LoggerJS||function(){"use strict";function a(a){var b=e(a),c=b[0];return c=(c.indexOf(" (")>=0?c.split(" (")[1].substring(0,c.length-1):c.split("at ")[1])||c,c=c.indexOf(")")>=0?c.split(")")[0]:c}function b(a){return/\n.*@/.test(a)?{type:"@",offset:1,lineSeparator:/\n.*@/,lineJoiner:"\n    at "}:/\n\s+at\s+/.test(a)?{type:"at",offset:3,lineSeparator:/\n\s+at\s+/,lineJoiner:"\n    at "}:void 0}function c(a){return a.split(w.lineSeparator)}function d(a){return a.join(w.lineJoiner)}function e(a){w||(w=b(a.stack));var d,e=c(a.stack);return e.length<2?e:d=e.slice(a.isFromConsoleWrapper?w.offset:1)}function f(b){var c,f,h=E.withStack.indexOf(b.name)>-1?!0:!1,i={};if(b instanceof Error){if(i.type="logentry",i.namespace=y,i.tags=B,i.timestamp=new Date,i.logLevel=b.name.toUpperCase(),i.uniqueKey=z,i.hash=z?r.SHA1(i.logMessage+i.timestamp.toISOString()).toString():r.SHA1(i.logMessage).toString(),b.message instanceof Error||E.withStack.indexOf(b.name)>-1){var j=e(b);j.unshift(b.message),i.logMessage=d(j)}else i.logMessage=b.message;i.logLocation=a(b),c=g(i.logLocation),f=c.split(":"),i.fileName=f[0]?f[0]:"unknown",i.lineNumber=f[1]?f[1]:"unknown",i.logLocation.indexOf(":"+i.lineNumber)<0&&(i.logLocation+=":"+i.lineNumber),h?i.stack=b.stack:i.logLocation=i.fileName+":"+i.lineNumber}return O(i),i}function g(a){x||(x=a.lastIndexOf("\\")>0?"\\":"/");var b=a.lastIndexOf(x)+1;return b>0?a.substring(b):a}function h(a){return this instanceof h?void(this.log=f(a)):new h}function i(a){if(!(this instanceof i))return new i;a=a?a:{};var b;if(!a.task)throw b=new Error,b.name="LogTaskInstanciationError",b.message="you have to provide a task for the LogTask instance: options = {task: function (logEntry) {/*your task code*/}}",b;if(!a.name)throw b=new Error,b.name="LogTaskInstanciationError",b.message='you have to provide a name for the LogTask instance: options = {name: "xyz"}',b;this.task=a.task,this.name=a.name,this.status="boolean"==typeof a.status?a.status:!0,this.strict="boolean"==typeof a.strict?a.strict:!1,this.logLevel=E.exists(a.logLevel)?a.logLevel:E.ERROR}function j(a){if(!(a&&a instanceof h))throw new Error("triggerLogTaskProcessing awaits a LogEntry object as argument");var b=a.toJson();for(var c in A)A[c].strict&&b.logLevel!==A[c].logLevel||E.checkPriority(b.logLevel,A[c].logLevel)&&A[c].task(a)}function k(a){C&&q&&q(a)}function l(a){if(!(this instanceof l))return new l;if(a=a?a:{},!a.namespace){var b=new Error('you have to provide a namespace for the Logger instance: options = {namespace: "x.y.z"}');throw b.name="LoggerInstanciationError",b}a.tags&&(B=a.tags),z="boolean"==typeof a.uniqueLogKeys?a.uniqueLogKeys:!0,y=a.namespace,this.status="boolean"==typeof a.status?a.status:!0,this.logLevel=E.exists(a.logLevel)?a.logLevel:E.ERROR,a.logServerUrl&&(K=E.exists(a.logServerLevel)?a.logServerLevel:this.logLevel,L=a.logServerUrl,this.useLogServer(L,K))}function m(a){return!J&&N?!1:(P=N())?(P.onreadystatechange=n,P.open("POST",L,!0),P.setRequestHeader("Content-Type","application/json; charset=utf-8"),void P.send(JSON.stringify(a.toJson()))):(console.error("LoggerJS::pushToLogServer - no HTTP Request coultd be instanciated"),!1)}function n(){if(4===this.readyState&&200!==this.status){var a;a=new Error(this.status?"LogServer returned HTTP StatusCode "+this.status+", url: "+L:"LogServer unreachable, url: "+L),a.name=E.WARNING,entry=new h(a),console.error(entry.toString()),k(entry)}}function o(a,b,c,d,e){var f=null;return e?(!e.fileName&&b&&(e.fileName=b),!e.lineNumber&&c&&(e.lineNumber=c)):(e=new Error(a),e.fileName=b,e.lineNumber=c),e.name="ERROR",f=new h(e),console.error(f.toString()),m(f),k(f),j(f),R&&R(a,b,c,d,e),!0}function p(){if(window&&!v){var a=!1;t&&(u=window.document.getElementById(t)),parent||(u=window.document.body,a=!0),v=document.createElement("div"),v.id=D,a&&u.firstChild?u.insertBefore(v,u.firstChild):u.appendChild(v),C=!0}else C=!1}function q(a){v||p();var b=a.toString().replace(/\n/g,"<br/>&nbsp;&nbsp;&nbsp;&nbsp;"),c=document.createElement("div");c.id=a.namespace+"-"+a.hash,c.className="LJS"+a.logLevel,c.innerHTML=b,v.firstChild?v.insertBefore(c,v.firstChild):v.appendChild(c)}var r=r||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=r,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)e[j]=0|a[b+j];else{var k=e[j-3]^e[j-8]^e[j-14]^e[j-16];e[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+e[j],k=20>j?k+((f&g|~f&h)+1518500249):40>j?k+((f^g^h)+1859775393):60>j?k+((f&g|f&h|g&h)-1894007588):k+((f^g^h)-899497514),i=h,h=g,g=f<<30|f>>>2,f=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(b),a.HmacSHA1=d._createHmacHelper(b)}();var s,t,u,v,w,x=null,y=null,z=!0,A={},B=[],C=!1,D="LJSWebConsole",E={},F=["FATAL","ERROR","WARNING","LOG","INFO","AUTH","PATH","DEBUG"];E.priority={},E.logPriority=F;for(var G in F){var H=F[G];E[H]=H,E.priority[H]=G}E.withStack=[E.FATAL,E.ERROR],E.checkPriority=function(a,b){return E.priority[a]<=E.priority[b]},E.exists=function(a){return E.priority[a]?!0:!1},h.prototype.toJson=function(){return this.log},h.prototype.toString=function(){var a=this.toJson(),b="";return b+=this.getConsolePrefix(),b+=" ",b+=a.logMessage},h.prototype.getConsolePrefix=function(){var a=this.toJson(),b="";return b+=a.timestamp.toISOString(),b+=" - ",b+=y,b+=" - ",b+=a.logLevel,b+=" - ",b+=a.logLocation,b+=" -"},i.prototype.setLogLevel=function(a){E.exists(a)&&(this.logLevel=a,this.status=!0)},i.prototype.disable=function(){this.status=!1},i.prototype.enable=function(){this.status=!0},i.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1};var I=function(a){var b=Error;b.prototype.write=function(a,b){this.isFromConsoleWrapper=!0,this.message=a.length>1?JSON.stringify(a):a[0];var c=b.toUpperCase(),f=E.withStack.indexOf(c)>-1?!0:!1;this.name=c;var g=new h(this);if(f&&!(a[0]instanceof Error)){var i=e(this);i.unshift(a[0]),a[0]=d(i)}for(var l in a)a[l]instanceof Error&&(a[l]=a[l].stack);var m=g.getConsolePrefix();if(a=[m].concat(a),console){var n=f?"error":b;console[n]?console[n].apply?console[n].apply(console,a):console[n](a):console.log.apply?console.log.apply(console,a):console.log(a)}else C=!0;return k(g),j(g),g.toString()};var c=function(a){var c=a.toUpperCase();return function(){return this.status&&E.checkPriority(c,this.logLevel)?b().write(Array.prototype.slice.call(arguments,0),a):void 0}},f=c("log");for(var g in a)f[a[g].toLowerCase()]=c(a[g].toLowerCase());return f}(E.logPriority);l.prototype=I,l.prototype.constructor=I;var J=!1,K=null,L=null,M=null;l.prototype.levels={};for(M in E)l.prototype.levels[M]=E[M];l.prototype.setLogLevel=function(a){E.exists(a)&&(this.logLevel=a,this.status=!0)},l.prototype.disable=function(){this.status=!1},l.prototype.enable=function(){this.status=!0},l.prototype.toggleStatus=function(){this.status=!this.status},l.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1},l.prototype.getNamespace=function(){return y},l.prototype.getTags=function(){return B},l.prototype.be=function(a){return a=a?a:this.logLevel,this.status&&E.checkPriority(a,this.logLevel)?!0:!1},l.prototype.useLogServer=function(a,b){K=E.exists(b)?b:E.ERROR,J=!0,L=a;var c={name:"LogServer",status:J,logLevel:K,task:m};this.registerLogTask(new i(c))},l.prototype.setLogServerLevel=function(a){K=E.exists(a)?a:E.ERROR,this.setLogTaskLogLevel("LogServer",K)},l.prototype.enableLogServer=function(){this.enableLogTask("LogServer")},l.prototype.disableLogServer=function(){this.disableLogTask("LogServer")},l.prototype.registerLogTask=function(a){a instanceof i&&(A[a.name]=a)},l.prototype.getLogTasks=function(){return A},l.prototype.setLogTaskLogLevel=function(a,b){A[a]&&E.exists(b)&&A[a].setLogLevel(b)},l.prototype.enableLogTask=function(a){A[a]&&A[a].enable()},l.prototype.disableLogTask=function(a){A[a]&&A[a].disable()},l.prototype.setLogTaskStatus=function(a,b){A[a]&&A[a].setLogLevel(b)},l.prototype.unregisterLogTask=function(a){"string"==typeof a&&A[a]&&delete A[a],a instanceof i&&A[a.name]&&delete A[a.name]};var N,O=function(a){a.userLocation=window.location.href},P=!1;if(window)if(window.XMLHttpRequest)N=function(){var a=new XMLHttpRequest;return a.overrideMimeType&&a.overrideMimeType("application/json"),a};else if(window.ActiveXObject)try{new ActiveXObject("Msxml2.XMLHTTP"),N=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(Q){try{new ActiveXObject("Microsoft.XMLHTTP"),N=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(Q){}}var R;window&&(window.onerror&&(R=window.onerror),window.onerror=o),l.prototype.useWebConsole=function(a,b){t=a||t,D=b||D,C=!0},l.prototype.enableWebConsole=function(){v&&(C=!0)},l.prototype.disableWebConsole=function(){C=!1,u.innerHTML=""},l.prototype.cleanWebConsole=function(){v.innerHTML=""};var s={Logger:function(a){var b=new l(a);return b},LogTask:function(a){var b=new i(a);return b}};for(var M in E)"string"==typeof E[M]&&(s[M]=E[M]);return s}(this);angular.module("LoggerJS",[]).factory("LoggerJS",LoggerJS);